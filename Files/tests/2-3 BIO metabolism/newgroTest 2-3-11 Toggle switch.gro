/* The famous toggle switch circuit. Two exclusive states marked by two proteins. Each cell type starts in one of the states and the external signals change it.*/

include gro3

global_params([ seed := 133087 ]);


//----------------------BIOCIRCUITS---------------------------
//---cells
cell_type([ name := "cell_A", strain := "_str_slow", bplasmids := {"bp_toggleSwitch"}, molecules := {"mol_A"} ]);
cell_type([ name := "cell_B", strain := "_str_slow", bplasmids := {"bp_toggleSwitch"}, molecules := {"mol_B"} ]);


//---gene expression
molecule([ name := "mol_A", times := { -10.0, 5.0 }, times_var := { 0.0, 0.0 } ]);
molecule([ name := "mol_B", times := { -10.0, 5.0 }, times_var := { 0.0, 0.0 } ]);

bgate([ name := "bga_produceA", type := "OR", input := {"-mol_B", "qga_sA"} ]);
operon([ name := "op_A", gate := "bga_produceA", output := {"mol_A"} ]);

bgate([ name := "bga_produceB", type := "OR", input := {"-mol_A", "qga_sB"} ]);
operon([ name := "op_B", gate := "bga_produceB", output := {"mol_B"} ]);
bplasmid([ name := "bp_toggleSwitch", operons := {"op_A", "op_B"} ]);

//---metabolism
signal([ name := "s_A", kdiff := 0.5, kdeg := 0.5, colour := _magenta, colour_sat := 10.0 ]);
signal([ name := "s_B", kdiff := 0.5, kdeg := 0.5, colour := _cyan, colour_sat := 10.0 ]);

qgate([ name := "qga_sA", input := "_conc_s_A", value := 0.1 ]);
qgate([ name := "qga_sB", input := "_conc_s_B", value := 0.1 ]);


//------------ WORLD CONTROL -----------------------
//---placers
cell_placer([ name := "cp_A", cell_types := {"cell_A"}, amount := 100.0, coords := [ x := -200.0, y := 0.0, r := 100.0 ] ]);
cell_placer([ name := "cp_B", cell_types := {"cell_B"}, amount := 100.0, coords := [ x := 200.0, y := 0.0, r := 100.0 ] ]);

//---
timer([ name := "t_signals", period := 50.0 ]);
signal_placer([ name := "sp_signals"
	, timer := "t_signals"
	, signals := {"s_A", "s_B"}
	, signal_probs := {}
	, mixed := false
	, amount := 10000.0
	, sources := 10.0
	, coords := [ x := 0.0, y := 0.0, r := 600.0 ] 
]);


//------------ VISUALS -----------------------
cell_colour([ name := "ccol_A", gate := "mol_A", rgb := _red ]);
cell_colour([ name := "ccol_B", gate := "mol_B", rgb := _green ]);