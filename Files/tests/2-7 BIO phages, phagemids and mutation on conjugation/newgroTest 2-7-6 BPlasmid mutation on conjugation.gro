/*
*/

include gro3

mutGate1 := "_ga_true";
//mutGate1 := "_ga_false";
mutGate2 := "_ga_true";
//mutGate2 := "_ga_false";

mutProb1 := 1.0;
mutProb2 := 1.0;

muts1 := {"mut_B"};
//muts1 := {"mut_B", "mut_AtoB"};
//muts1 := {""};

//muts2 := {"", "mut_notA"};
//muts2 := {"mut_0", "mut_notA"};
muts2 := {""};

//conjMutations := {};
//conjMutations := {"mutp_1"};
conjMutations := {"mutp_1", "mutp_2"};


global_params([ seed := 123443, show_plots := true ]);


//----------------------BIOCIRCUITS---------------------------
//---cells
cell_type([ name := "cell_donor", strain := "_str_nogrowth", plasmids := {"p_A"} ]);
cell_type([ name := "cell_recipient", strain := "_str_nogrowth" ]);


//---plasmdids
plasmid([ name := "p_A", oriTs := {"ot_A"}, repli_mutations := conjMutations, repli_mut_keys := {2,2} ]);
plasmid([ name := "p_B" ]);


//---conjugation
bgate([ name := "ga_notEex", input := {"-p_A", "-p_B"} ]);
pilus([ name := "pil_A"
	//, donor_gate := "cell_donor"
	, recipient_gate := "ga_notEex"
	, max_rate := 0.01
]);

oriT([ name := "ot_A", pilus := "pil_A", mutation_keys := {2} ]);


//---mutation
mutation([ name := "mut_0", plasmids := {}, amounts := {} ]);
mutation([ name := "mut_normal", plasmids := {"p_A"}, amounts := {1} ]);
mutation([ name := "mut_B", plasmids := {"p_B"}, amounts := {1} ]);
mutation([ name := "mut_notA", plasmids := {"p_A"}, amounts := {-1} ]);
mutation([ name := "mut_AtoB", plasmids := {"p_A", "p_B"}, amounts := {-1} ]);

mutation_process([ name := "mutp_1", gate := mutGate1, mutations := muts1, rate := mutProb1 ]);
mutation_process([ name := "mutp_2", gate := mutGate2, mutations := muts2, rate := mutProb2 ]);



//------------ WORLD CONTROL -----------------------
//---placers
cell_placer([ name := "cp_donor", cell_types := { "cell_donor" }, amount := 10.0, coords := [ x := 0.0, y := 0.0, r := 100.0 ] ]);
cell_placer([ name := "cp_recipient", cell_types := {"cell_recipient"}, amount := 300.0, coords := [ x := 0.0, y := 0.0, r := 100.0 ] ]);


//------------ VISUALS -----------------------
cell_colour([ name := "ccol_green", gate := "p_A", rgb := _green ]);
cell_colour([ name := "ccol_blue", gate := "p_B", rgb := _blue ]);
cell_colour([ name := "ccol_red", gate := "cell_donor", rgb := _red ]);

plot([ name := "plot_plas", fields := {"p_A", "p_B"}, stats := "avg" ]);