/*
*/

include gro3

global_params([ seed := 123443, show_plots := true ]);


//----------------------BIOCIRCUITS---------------------------
//---cells
cell_type([ name := "cell_donor", strain := "_str_nogrowth", plasmids := {"p_0"} ]);
cell_type([ name := "cell_recipient", strain := "_str_nogrowth", plasmids := {"p_A"} ]);

//---plasmdids
plasmid([ name := "p_0", oriTs := {"ot_A"}, repli_mutations := {"mutp_null"}, repli_mut_keys := {2} ]);
plasmid([ name := "p_A", operons := {"op_A"} ]);


//---gene expression
molecule([ name := "mol_A", times := { -100.0, 0.01 } ]);
operon([ name := "op_A", gate := "ev_recipient", output := {"mol_A"} ]);


//---conjugation
bgate([ name := "ga_notEex", input := {"-p_0"} ]);
pilus([ name := "pil_A"
	//, donor_gate := "cell_donor"
	, recipient_gate := "ga_notEex"
	, max_rate := 0.01
]);

oriT([ name := "ot_A", pilus := "pil_A", mutation_keys := {2}, recipient_event := "ev_recipient" ]);


//---mutation
mutation([ name := "mut_0", plasmids := {}, amounts := {} ]);
mutation_process([ name := "mutp_null", gate := "_ga_true", mutations := {"mut_0"}, rate := 1.0 ]);


//------------ WORLD CONTROL -----------------------
//---placers
cell_placer([ name := "cp_donor", cell_types := { "cell_donor" }, amount := 10.0, coords := [ x := 0.0, y := 0.0, r := 100.0 ] ]);
cell_placer([ name := "cp_recipient", cell_types := { "cell_recipient" }, amount := 300.0, coords := [ x := 0.0, y := 0.0, r := 100.0 ] ]);


//------------ VISUALS -----------------------
cell_colour([ name := "ccol_green", gate := "mol_A", rgb := _green ]);
cell_colour([ name := "ccol_blue", gate := "p_0", rgb := _blue ]);
cell_colour([ name := "ccol_red", gate := "cell_donor", rgb := _red ]);

plot([ name := "plot_plas", gate := "cell_recipient", fields := {"p_0"}, stats := "avg" ]);
plot([ name := "plot_event", fields := {"ev_recipient"}, stats := {"sum"} ]);
plot([ name := "plot_mol", gate := "cell_recipient", fields := {"mol_A"}, stats := "avg" ]);